<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Verdanita Admin Panel</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 min-h-screen p-6">

<!-- LOGIN -->
<div id="loginBox" class="max-w-md mx-auto bg-white p-8 rounded-xl shadow">
  <h2 class="text-2xl font-bold mb-6">Admin Login</h2>
  <input id="password" type="password"
         placeholder="Enter password"
         class="w-full p-3 border rounded mb-4">
  <button onclick="login()"
          class="w-full bg-green-700 text-white py-3 rounded font-semibold">
    Login
  </button>
</div>

<!-- ADMIN PANEL -->
<div id="adminPanel" class="hidden max-w-5xl mx-auto bg-white p-8 rounded-xl shadow">

  <h1 class="text-3xl font-bold mb-6">Product Manager</h1>

  <!-- ADD PRODUCT -->
  <div class="grid md:grid-cols-4 gap-4 mb-6">
    <input id="title" placeholder="Product Name"
           class="p-3 border rounded">
    <input id="image" placeholder="Image path (assets/projects/...)"
           class="p-3 border rounded">

    <select id="category" class="p-3 border rounded">
      <option value="Tiles">Tiles</option>
      <option value="Pavers">Pavers</option>
      <option value="Garden">Garden</option>
    </select>

    <button onclick="addProduct()"
            class="bg-green-700 text-white rounded font-semibold">
      Add
    </button>
  </div>

  <hr class="my-8">

  <!-- PRODUCT LIST -->
  <h2 class="text-xl font-bold mb-4">Products</h2>
  <div id="list" class="space-y-3"></div>

  <hr class="my-8">

  <!-- EXPORT -->
  <button onclick="exportJSON()"
          class="bg-blue-700 text-white px-6 py-3 rounded font-semibold">
    Download products.json
  </button>

  <p class="text-sm text-gray-500 mt-3">
    Upload this file to <b>/data/products.json</b> in GitHub
  </p>
</div>

<script>
const ADMIN_PASSWORD = "verdanita123";
let products = [];

/* LOGIN */
function login(){
  if(password.value === ADMIN_PASSWORD){
    loginBox.classList.add("hidden");
    adminPanel.classList.remove("hidden");
  } else alert("Wrong password");
}

/* ADD */
function addProduct(){
  if(!title.value || !image.value) return alert("Fill all fields");

  products.push({
    title: title.value,
    image: image.value,
    category: category.value
  });

  title.value = "";
  image.value = "";
  render();
}

/* EDIT */
function editTitle(i,val){ products[i].title = val; }
function editCategory(i,val){ products[i].category = val; }

/* DELETE */
function removeProduct(i){
  products.splice(i,1);
  render();
}

/* RENDER */
function render(){
  list.innerHTML = "";
  products.forEach((p,i)=>{
    list.innerHTML += `
      <div class="flex gap-3 items-center bg-gray-100 p-3 rounded">
        <input value="${p.title}"
               onchange="editTitle(${i},this.value)"
               class="p-2 border rounded flex-1">
        <select onchange="editCategory(${i},this.value)"
                class="p-2 border rounded">
          <option ${p.category==="Tiles"?"selected":""}>Tiles</option>
          <option ${p.category==="Pavers"?"selected":""}>Pavers</option>
          <option ${p.category==="Garden"?"selected":""}>Garden</option>
        </select>
        <button onclick="removeProduct(${i})"
                class="text-red-600 font-bold">âœ•</button>
      </div>`;
  });
}

/* EXPORT JSON */
function exportJSON(){
  const blob = new Blob(
    [JSON.stringify(products,null,2)],
    {type:"application/json"}
  );
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = "products.json";
  a.click();
}
</script>

</body>
</html>
